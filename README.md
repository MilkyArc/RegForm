# Проект - Форма за Регистрация


## Използвани Технологии

- **JavaScript**: Използва се за скриптовете както на сървъра, така и на клиента.
- **HTML**: Предоставя структурата на уеб страниците.
- **CSS**: Използва се за стилизиране на уеб страниците.
- **MySQL**: СУБД за релационни бази данни, използвана за съхранение на потребителски данни.
- **Node.js**: JavaScript среда за изпълнение за сървъра.
- **dotenv**: Модул за зареждане на environment variables от `.env` файл.

## Функционалности и Реализации

1. **Валидация на Данни**:
   - **Реализация**: Клиентската и сървърната валидация осигуряват целостта на данните и предотвратяват въвеждането на невалидни такива. JavaScript функции валидират формати на входа, налагат правила (като дължина на паролата и валиден формат на имейл) и гарантират, че имената са правилно форматирани.

2. **Съхранение на Данни в MySQL База Данни**:
   - **Реализация**: Потребителските данни се съхраняват в MySQL база данни. Модулът `mysql` на Node.js управлява връзките и заявките към базата данни.

3. **Вход/Изход**:
   - **Реализация**: Функционалностите за вход и изход се управляват чрез сървърни сесии. Потребителските идентификационни данни се проверяват спрямо базата данни, а сесиите се създават или прекратяват в зависимост от състоянието на автентикацията. Потребителят се препраща към страница с таблото си за управление при успешен вход и се връща на login страницата при изход..

4. **Промяна на Данни на Потребителя**:
   - **Реализация**: Възможност за промяна на имена и парола на потребителя. Успешно логнати потребители могат да актуализират личната си информация от страницата с таблото (dashboard). Промените се валидират и след това се актуализират в базата данни.

5. **Unit Тестове**:
   - **Реализация**: Модулни (Unit) тестове, които покриват 100% от функциите в сървърния код, като гарантират, че всички функционалности работят според очакванията.

6. **Captcha**:
   - **Реализация**: Креативна идея за Кепча, генерирана и валидирана на сървъра, без да се използват външни услуги. Изисква се при регистрация и вход.

## Мерки за Сигурност

Проектът включва няколко допълнителни мерки за сигурност за защита на потребителските данни и гарантиране на целостта на приложението:

- **Env variables**: Идентификационните данни за връзка с базата данни се съхраняват в `.env` файл и се зареждат с помощта на модула `dotenv`. Това предотвратява излагането на чувствителна информация в изходния код.
- **Хеширане на Пароли**: Потребителските пароли се хешират с помощта на библиотеката `bcrypt` преди да бъдат съхранени в базата данни. Това гарантира, че дори ако базата данни бъде компрометирана, потребителските пароли не се разкриват в чист текст. Паролите освен това се посоляват, така че дори 2-ма потребители да използват една и съща парола при регистрация, това няма да проличи в БД.
- **Управление на Сесии**: Потребителските сесии се управляват чрез бисквитки със защитни флагове за предотвратяване на неоторизиран достъп. Само успешно логнати потребители могат да получат достъп до защитени страници като таблото за управление.
- **Rate Limiting**: Реализирана е функция за ограничаване на броя на възможните заявки от даден IP адрес за единица време, за да се предотвратят атаки тип Отказ на Услугата (DoS).
- **Контрол на Достъпа**: Потребителите се пренасочват към страницата за вход, ако се опитат да достъпят защитени страници без да са се логнали.

## Използване на готови функции

- **Стандартни Функции на Node.js**: Функции като `http.createServer()`, `url.parse()` и `fs.readFile()` се използват за настройка на сървъра, обработка на заявки и "сервиране" на статични файлове.
- **Функции на Модула MySQL**: Функциите на модула `mysql` като `connection.query()` се използват за взаимодействие с MySQL базата данни.
- **Функции на Bcrypt**: Функциите на `bcrypt` като `bcrypt.hash()` и `bcrypt.compare()` се използват за сигурно хеширане на пароли и проверка на потребителските идентификационни данни.

## Файлове с Код

1. **`server.js`**: Инициализира сървъра и прилага rate limiting за защита от DoS.
2. **`routes.js`**: Управлява маршрутизирането на HTTP заявки към съответните функции за обработка.
3. **`db.js`**: Управлява всички взаимодействия с MySQL базата данни.
4. **`authUtils.js`**: Предоставя помощни средства за хеширане на пароли и верификация на потребителите.
5. **`changeUserData.js`**: Съдържа логиката за промяна на потребителски данни като имена и парола.
6. **`login.js`**: Управлява функционалността за вход на потребители.
7. **`logout.js`**: Управлява функционалността за изход на потребители.
8. **`register.js`**: Управлява функционалността за регистрация на нови потребители.
9. **`session.js`**: Управлява потребителските сесии и генерирането на CAPTCHA.
10. **`utils.js`**: Предоставя помощни функции като "сервиране" на статични файлове и парсване на бисквитки.
11. **`validation.js`**: Съдържа функции за валидиране, които осигуряват целостта и формата на данните.
12. **`formValidation.js` (Клиент)**: Клиентски JavaScript файл за валидиране на данните от формите с цел обратна връзка към потребителя. Всички данни се валидират и на сървъра.
13. **`captcha.js` (Клиент)**: Клиентски файл за зареждане на CAPTCHA.
14. **`auth.js` (Клиент)**: Управлява клиентската логика за автентикация.
15. **`userProfile.js` (Клиент)**: Управлява клиентската логика за промяна на потребителски данни.
16. **`clear-test-entries-from-DB.js` (Тестове)**: Скрипт за изчистване на записи в базата данни, създадени по време на модулно тестване.
17. **`test-server.js` (Тестове)**: Скрипт за изпълнение на unit тестовете.

